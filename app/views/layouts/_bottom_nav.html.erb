<!-- Mobile Bottom Nav -->
<nav class="bottom-nav md:hidden">
  <div class="bottom-nav-container">
    <%= link_to matches_path, class: "bottom-nav-link #{current_page?(matches_path) ? 'active' : ''}" do %>
      <i class="fas fa-futbol bottom-nav-icon"></i>
      <span class="bottom-nav-label">Matches</span>
    <% end %>

    <%= link_to leaderboard_path(:show), class: "bottom-nav-link #{current_page?(leaderboard_path(:show)) ? 'active' : ''}" do %>
      <i class="fas fa-trophy bottom-nav-icon"></i>
      <span class="bottom-nav-label">Leaderboard</span>
    <% end %>

    <%= link_to leaderboard_index_path, class: "bottom-nav-link #{current_page?(leaderboard_index_path) ? 'active' : ''}" do %>
      <i class="fas fa-users bottom-nav-icon"></i>
      <span class="bottom-nav-label">Groups</span>
    <% end %>

    <button id="darkModeToggleMobile" class="bottom-nav-link">
      <span class="material-symbols-outlined bottom-nav-icon darkModeIcon">dark_mode</span>
      <span class="bottom-nav-label">Theme</span>
    </button>
  </div>
</nav>

<!-- Desktop Top Nav -->
<nav class="hidden md:block fixed top-0 left-0 right-0 bg-background-light dark:bg-background-dark border-b border-gray-200 dark:border-gray-800 z-50">
  <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center gap-8">
        <h1 class="text-xl font-bold text-text-primary-light dark:text-text-primary-dark">World Cup 2026</h1>
        <%= link_to matches_path, class: "flex items-center gap-2 px-4 py-2 rounded-lg transition-colors #{current_page?(matches_path) ? 'bg-primary text-white' : 'text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800'}" do %>
          <i class="fas fa-futbol"></i>
          <span class="font-medium">Matches</span>
        <% end %>

        <%= link_to leaderboard_path(:show), class: "flex items-center gap-2 px-4 py-2 rounded-lg transition-colors #{current_page?(leaderboard_path(:show)) ? 'bg-primary text-white' : 'text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800'}" do %>
          <i class="fas fa-trophy"></i>
          <span class="font-medium">Leaderboard</span>
        <% end %>

        <%= link_to leaderboard_index_path, class: "flex items-center gap-2 px-4 py-2 rounded-lg transition-colors #{current_page?(leaderboard_index_path) ? 'bg-primary text-white' : 'text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800'}" do %>
          <i class="fas fa-users"></i>
          <span class="font-medium">Groups</span>
        <% end %>
      </div>

      <button id="darkModeToggleDesktop" class="flex items-center gap-2 px-4 py-2 rounded-lg text-text-secondary-light dark:text-text-secondary-dark hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
        <span class="material-symbols-outlined darkModeIcon">dark_mode</span>
        <span class="font-medium">Theme</span>
      </button>
    </div>
  </div>
</nav>

<!-- Spacer for fixed desktop nav -->
<div class="hidden md:block h-16"></div>

<script>
  (function() {
    const toggleMobile = document.getElementById('darkModeToggleMobile');
    const toggleDesktop = document.getElementById('darkModeToggleDesktop');
    const icons = document.querySelectorAll('.darkModeIcon');
    const html = document.documentElement;

    // Get saved preference or default to dark
    const currentMode = localStorage.getItem('darkMode') || 'dark';

    // Apply initial mode
    function updateTheme(isDark) {
      if (isDark) {
        html.classList.add('dark');
        icons.forEach(icon => icon.textContent = 'dark_mode');
      } else {
        html.classList.remove('dark');
        icons.forEach(icon => icon.textContent = 'light_mode');
      }
    }

    // Initialize
    updateTheme(currentMode === 'dark');

    // Toggle function
    function toggleTheme() {
      const isDark = html.classList.contains('dark');
      if (isDark) {
        html.classList.remove('dark');
        localStorage.setItem('darkMode', 'light');
        updateTheme(false);
      } else {
        html.classList.add('dark');
        localStorage.setItem('darkMode', 'dark');
        updateTheme(true);
      }
    }

    // Add event listeners
    if (toggleMobile) toggleMobile.addEventListener('click', toggleTheme);
    if (toggleDesktop) toggleDesktop.addEventListener('click', toggleTheme);
  })();
</script>
